# Журнал решений

## 29.03.2025 - Добавление функциональности шаблонных трат

### Решение: Создание отдельных таблиц для шаблонов и их тегов
**Контекст:** Необходимо было решить, как хранить шаблоны транзакций в базе данных.

**Варианты:**
1. Добавить поле `is_template` в существующую таблицу `transactions`
2. Создать отдельную таблицу `templates` для шаблонов

**Решение:** Создать отдельные таблицы `templates` и `template_tags`.

**Обоснование:**
- Шаблоны и транзакции имеют разные жизненные циклы и назначение
- Отдельные таблицы обеспечивают лучшую изоляцию данных
- Упрощается работа с шаблонами (не нужно фильтровать по полю `is_template`)
- Можно добавлять специфичные для шаблонов поля (например, `name`)

### Решение: Создание отдельной страницы для управления шаблонами
**Контекст:** Необходимо было решить, где разместить интерфейс для управления шаблонами.

**Варианты:**
1. Добавить вкладку на странице транзакций
2. Разместить на странице создания новой транзакции
3. Создать отдельную страницу
4. Создать модальное окно, доступное с любой страницы

**Решение:** Создать отдельную страницу `/templates`.

**Обоснование:**
- Отдельная страница обеспечивает лучшую организацию интерфейса
- Пользователь может легко найти и управлять всеми своими шаблонами
- Упрощается навигация и улучшается пользовательский опыт
- Возможность добавления дополнительных функций в будущем (категоризация, поиск, фильтрация)

### Решение: Использование диалогового окна для сохранения шаблона
**Контекст:** Необходимо было решить, как пользователь будет сохранять текущую форму как шаблон.

**Варианты:**
1. Добавить поле для названия шаблона прямо в форму
2. Использовать диалоговое окно
3. Перенаправлять на отдельную страницу для сохранения шаблона

**Решение:** Использовать диалоговое окно для ввода названия шаблона.

**Обоснование:**
- Диалоговое окно не перегружает основную форму
- Пользователь может сначала заполнить форму, а потом решить сохранить ее как шаблон
- Улучшается пользовательский опыт (не нужно переходить на другую страницу)
- Соответствует современным практикам UI/UX

## 29.03.2025 - Отладка функциональности шаблонных трат

### Решение: Добавление явного приведения типов при работе с базой данных
**Контекст:** При создании шаблона возникала ошибка "FOREIGN KEY constraint failed", связанная с внешним ключом `ownerId` в таблице `templates`.

**Варианты:**
1. Использовать явное приведение типов при вставке записей в базу данных
2. Изменить тип поля `ownerId` в таблице `templates`
3. Изменить способ получения ID пользователя из сессии

**Решение:** Добавить явное приведение типов при вставке записей в базу данных.

**Обоснование:**
- Явное приведение типов гарантирует, что типы данных будут правильно преобразованы
- Не требуется изменять схему базы данных
- Соответствует подходу, используемому в других частях кода (например, в методе создания транзакции)
- Предотвращает возможные проблемы с типами данных в будущем

## 30.03.2025 - Улучшение пользовательского интерфейса

### Решение: Добавление кнопки для шаблонов в навигационную панель
**Контекст:** Необходимо было обеспечить быстрый доступ к странице шаблонов с любой страницы приложения.

**Варианты:**
1. Добавить кнопку в навигационную панель
2. Добавить ссылку в выпадающее меню
3. Добавить ссылку на главной странице

**Решение:** Добавить кнопку с иконкой закладки в навигационную панель.

**Обоснование:**
- Навигационная панель доступна с любой страницы приложения
- Иконка закладки интуитивно понятна для обозначения шаблонов
- Соответствует дизайну существующих кнопок в навигационной панели
- Обеспечивает быстрый доступ к функциональности шаблонов