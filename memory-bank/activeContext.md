# Активный контекст

## Текущая задача
Добавление кнопки для шаблонов в навигационную панель.

## Описание задачи
Пользователь должен иметь возможность:
1. Сохранить текущую форму создания транзакции как шаблон с заданным названием
2. Выбрать шаблон при создании новой транзакции и получить предзаполненную форму
3. Управлять шаблонами (просмотр, редактирование, удаление) на отдельной странице
4. Легко перейти на страницу шаблонов с любой другой страницы приложения

## Статус
Задача выполнена. Добавлена кнопка для шаблонов в навигационную панель.

## Предыдущие задачи

### Отладка функциональности шаблонных трат
Обнаружена и исправлена ошибка "FOREIGN KEY constraint failed" при создании шаблона.

#### Проблема
При попытке создать шаблон возникала ошибка "FOREIGN KEY constraint failed", связанная с внешним ключом `ownerId` в таблице `templates`.

#### Решение
1. Добавлено явное приведение типов при создании шаблона:
   ```typescript
   const toInsert: (typeof templatesTable.$inferInsert) = {
       ...rest,
       amount: formatted,
       ownerId: ctx.session.user.id,
   };
   ```

2. Добавлено явное приведение типов при создании тегов для шаблона:
   ```typescript
   const tagsValues: (typeof templateTagsTable.$inferInsert)[] = tags.map((el) => {
       return {
           templateId: Number(resp[0]!.insertedId),
           text: el,
       };
   });
   ```

3. Добавлено явное приведение типов при обновлении шаблона:
   ```typescript
   const toUpdate: Partial<typeof templatesTable.$inferInsert> = {
       ...rest,
       amount: formatted,
   };
   ```

4. Добавлено явное приведение типов при обновлении тегов для шаблона:
   ```typescript
   const tagsValues: (typeof templateTagsTable.$inferInsert)[] = tags.map((el) => {
       return {
           templateId: id,
           text: el,
       };
   });
   ```

### Добавление кнопки для шаблонов в навигационную панель
Добавлена кнопка для быстрого перехода на страницу шаблонов.

#### Решение
1. Добавлена иконка `BookmarkIcon` из библиотеки `lucide-react`:
   ```typescript
   import { BookmarkIcon, TrashIcon, UserIcon } from 'lucide-react';
   ```

2. Добавлена кнопка для шаблонов в навигационную панель:
   ```typescript
   <HeaderLink href="/templates">
       <BookmarkIcon />
   </HeaderLink>
   ```

## Следующие шаги
1. Тестирование функциональности шаблонных трат
2. Возможные улучшения UI/UX
3. Добавление дополнительных функций (например, категоризация шаблонов)